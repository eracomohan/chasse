<!DOCTYPE html>
<!--
                         __________________________________________________________.                    
               __  __*="" ╰-------┳--------------------╮---------------------------|     == |MMLEHO:>►  
     ___..=="""  Y'       __)______╮___________________)–––––––––––––––––––––––––––'                    
    !"         _     _==""(C_)                                                                          
    !     _=""' "=__/                                                                                   
    ╰=="""                                                                                              
-->
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chasse – The Deer hunter</title>
    <link rel="icon" type="image/icon" href="img/favicon.ico"/>
    <link rel="icon" type="image/svg" href="img/favicon.svg"/>
    <link rel="icon" type="image/png" href="img/favicon.png"/>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="fake-font-variable.css">
    <link rel="stylesheet" href="lightbox.css">
    <script src="hologramme.js"></script>
    <script src="lightbox.js"></script>
    <script src="p5.js"></script>
    <script src="holo-6.js"></script>
    <script src="script3d.js"></script>
</head>
<body>
    <section class="hero">
        <div class="stack deer">
            <div class="hero-title text-tight" style="--stagger: 0s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 0.15s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 0.3s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 0.45s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 0.6s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 0.75s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 0.9s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 1.05s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 1.2s"><div class="hero-layer text-tight">THE DEER</div></div>
            <div class="hero-title text-tight" style="--stagger: 1.35s"><div class="hero-layer text-tight">THE DEER</div></div>
        </div>
        
        <div class="stack hunter">
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
            <div class="hero-title text-tight"><div class="hero-layer text-tight">&nbsp;HUNTER</div></div>
        </div>
        <!-- <div class="deer">
            <div class="hero-title hero-oneshot"><div class="hero-layer hero-back hero-back-1">THE DEER</div></div>    
            <div class="hero-title hero-oneshot2"><div class="hero-layer hero-back hero-back-2">THE DEER</div></div>    
            <div class="hero-title hero-oneshot3"><div class="hero-layer hero-back hero-back-3">THE DEER</div></div>
            <div class="hero-title hero-oneshot4"><div class="hero-layer hero-back hero-back-4">THE DEER</div></div>
            <div class="hero-title hero-oneshot5"><div class="hero-layer hero-back hero-back-5">THE <a href="https://youtu.be/dQw4w9WgXcQ?si=X1S4ZPm2cTpTlsP1" class="easter">DEER</a><p class="egg">DEER</p></div></div>
        </div>
        <div class="hunter">
            <div class="hero-title hunter-oneshot"><div class="hero-layer hunter-back hunter-back-1">HUNTER</div></div>    
            <div class="hero-title hunter-oneshot2"><div class="hero-layer hunter-back hunter-back-2">HUNTER</div></div>    
            <div class="hero-title hunter-oneshot3"><div class="hero-layer hunter-back hunter-back-3">HUNTER</div></div>
            <div class="hero-title hunter-oneshot4"><div class="hero-layer hunter-back hunter-back-4">HUNTER</div></div>
            <div class="hero-title hunter-oneshot5"><div class="hero-layer hunter-back hunter-back-5">HUNTER</div></div>
        </div> -->
    </section> 
    
    <section class="etape-1">

        <div class="repetition block" >
            <div class="oneshot block">
                <div class="layer back back-1">ONE SHOT</div>
            </div>    
            <div class="oneshot2 block" >
                <div class="layer back back-2">ONE SHOT</div>
            </div>    
            <div class="oneshot3 block" >
                <div class="layer back back-3">ONE SHOT</div>
            </div>
        </div>
        <div id="stickerDrawer" class="drawer closed">
    <div class="img-container no-scrollbar">
    <div id="stickerDrawerHandle" class="handle"><div class="poignee"></div></div>
        <img class="one-e1" src="img/e1-1.png" alt="">
        <img class="one-e1" src="img/e1-2.png" alt="">
        <img class="one-e1" src="img/e1-3.png" alt="">
    </div>
</div>

    </section>
    <section class="espace">

    </section>
    <section class="holo1">

    <!-- IMAGES -->
    <div class="images">
        <img class="img-s2" src="img/2A3A9705.JPG" alt="">
        <img class="img-s2" src="img/2A3A9708.JPG" alt="">
        <img class="img-s2" src="img/2A3A9707.JPG" alt="">
    </div>

    <!-- TEXTES -->
    <div class="texts">
        <p class="txt-s2 left">I got him</p>
        <p class="txt-s2 right">I got him</p>
    </div>

</section>
    <section class="espace">

    </section>
    <section class="etape-3">
        <p>You can’t take him like that.</p>
        
        <div class="wrapper-3d">
          <p class="text-3d">Why not?</p>
        </div>
 
        <p class="clean">You’ve got to do it clean.</p>
    </section>
     <section class="etape-4">
          <div class="container-loupe">
            <picture class="background-loupe">
               <img class="loupe" src="img/derriere260212.jpg" alt="">
            </picture>
            <div style="--x:15%;--y:15%;--r:15vw;transform-origin:15% 15%;clip-path:circle(var(--r, 15vw) at 15% 15%);-webkit-clip-path:circle(var(--r, 15vw) at 15% 15%);" class="bg-black animate-pulse-clip absolute scale-[1.0055] inset-0 w-full h-full object-cover opacity-100 transition-opacity duration-300"></div>
            <picture id="cursor">
               <img class="loupedef" class="loupe" src="img/devant.jpg" alt="">
            </picture>
          </div>
    </section>
  
    <section class="holo">
    <img class="img-s6" src="img/2A3A9717.JPG" alt="">
    <img class="img-s6" src="img/2A3A9718.JPG" alt="">
    <img class="img-s6" src="img/2A3A9719.JPG" alt="">
    <img class="img-s6" src="img/2A3A9720.JPG" alt="">
    </section>

    <section class="espace"></section>
  
<section class="etape-5">
    <div class="half left">
        <div class="state default">
            <img src="img/2A3A9805.JPG" alt="">
        </div>
        <div class="state hover state-start">
            <p class="hurt text-tight" style="color:#42e19c">He won’t be <br><span class="hurt-span hears">hurt</span><br><br></p>
        </div>
    </div>
    <div class="half right">
        <div class="state default text-tight state-end">
            <p>If he <br><span class="hears">hears</span> <br>the shot</p>
        </div>
        <div class="state hover">
            <img src="img/2A3A9804.JPG" alt="">
        </div>
    </div>
</section>


<section class="etape-10">
  <div class="images">
        <img src="img/1.png" alt="" class="image active">
        <img src="img/2.png" alt="" class="image">
  </div>
    </section>
    <section class="espace"></section>
    <section class="etape-7"> 
        <p class="gunshot" id="monParagraphe">Gunshot</p>
        <p class="fall">The deer falls</p>
    </section>    

    
    <section class="etape-11 typo-section" id="typoSection">
    <div class="sticky">
      <div id="text" style="  font-size: clamp(2rem, 11vw, 20rem);">
            It’s a good shot
    </div>
    </div>
  </section>  
    
    <footer>
        <p class="footer">FIN<br></p>
        <p class="footer">Exposition interactive</p>
        <p class="footer">Par Oryana, Emma et Mohan</p>
        <p class="footer">Inspirés de du film <em>The Deer Hunter</em></p>
        <p class="mmleho">Hé mais, mets le à chaud!&nbsp;&copy;&nbsp;2026</p>
    </footer>
    <audio src="tdh-music.m4a" id="monSon"></audio>
    <audio src="rifle_mixdown.mp3" id="gunSound"></audio>
</body>
<script>/* TIROIR */
  
function initStickerDrawer() {
    const drawer = document.getElementById("stickerDrawer");
    const handle = document.getElementById("stickerDrawerHandle");

    drawer.classList.add("closed");

    let isDragging = false;
    let startX = 0;
    let startWidth = 0;

    // Début du drag (mouse ou touch)
    const startDrag = (e) => {
        isDragging = true;
        startX = e.type.includes("touch") ? e.touches[0].clientX : e.clientX;
        startWidth = drawer.getBoundingClientRect().width;
        drawer.style.transition = "none"; // désactive la transition pendant le drag
    };

    // Drag en cours
    const onDrag = (e) => {
        if (!isDragging) return;
        const currentX = e.type.includes("touch") ? e.touches[0].clientX : e.clientX;
        const dx = startX - currentX; // déplacement horizontal

        // drawer.parentElement.width
        const maxWidth = drawer.parentElement.getBoundingClientRect().width;
        let newWidth = startWidth + dx; // on augmente ou réduit la largeur

        // bornes
        newWidth = Math.min(maxWidth, Math.max(maxWidth / 2, newWidth));
        drawer.style.width = newWidth + "px";
    };

    // Fin du drag
    const endDrag = () => {
        if (!isDragging) return;
        isDragging = false;

        const maxWidth = drawer.parentElement.getBoundingClientRect().width;
        const currentWidth = drawer.getBoundingClientRect().width;

        drawer.style.transition = "width 0.5s ease"; // réactive la transition

        // si drawer > 75% → open, sinon → closed
        if (currentWidth > maxWidth * 0.75) {
            drawer.classList.add("open");
            drawer.classList.remove("closed");
            drawer.style.width = ""; // reset, prend la valeur CSS
        } else {
            drawer.classList.add("closed");
            drawer.classList.remove("open");
            drawer.style.width = ""; // reset
        }
    };

    // événements
    handle.addEventListener("mousedown", startDrag);
    handle.addEventListener("touchstart", startDrag);

    window.addEventListener("mousemove", onDrag);
    window.addEventListener("touchmove", onDrag);

    window.addEventListener("mouseup", endDrag);
    window.addEventListener("touchend", endDrag);

    // click normal
    handle.addEventListener("click", (e) => {
        // si on était en drag, ignore le click
        if (isDragging) return;

        if (drawer.classList.contains("open")) {
            drawer.classList.remove("open");
            drawer.classList.add("closed");
        } else {
            drawer.classList.remove("closed");
            drawer.classList.add("open");
        }
    });
}

window.addEventListener("DOMContentLoaded", initStickerDrawer);

</script>

<script> /* IGOT HIM WIP*/
const holo1 = document.querySelector(".holo1");
const holoImages = holo1.querySelectorAll(".img-s2");
const holoTexts  = holo1.querySelectorAll(".txt-s2");

const holoSteps = holoImages.length - 1;

let targetT = 0;
let currentT = 0;
const smoothness = 0.08;

// état initial
holoImages[0].style.opacity = 1;
holoTexts[0].style.opacity = 1;

function clamp(v, min, max) {
    return Math.min(max, Math.max(min, v));
}

function updateScene(t) {
    const scaled = t * holoSteps;
    const index = Math.floor(scaled);
    const localT = scaled - index;

    holoImages.forEach(img => img.style.opacity = 0);
    holoTexts.forEach(txt => txt.style.opacity = 0);

    // images
    if (holoImages[index]) {
        holoImages[index].style.opacity = 1 - localT;
    }
    if (holoImages[index + 1]) {
        holoImages[index + 1].style.opacity = localT;
    }

    // textes synchronisés
    if (index === 0 && localT < 0.5) {
        holoTexts[0].style.opacity = 1;
    }

    if (index === holoSteps - 1 && localT > 0.5) {
        holoTexts[1].style.opacity = 1;
    }
}

function animate() {
    currentT += (targetT - currentT) * smoothness;
    updateScene(currentT);
    requestAnimationFrame(animate);
}

holo1.addEventListener("mousemove", e => {
    const rect = holo1.getBoundingClientRect();
    targetT = clamp(
        (e.clientX - rect.left) / rect.width,
        0,
        1
    );
});

holo1.addEventListener("touchstart", e => {
    if (e.touches.length) {
        const rect = holo1.getBoundingClientRect();
        targetT = clamp(
            (e.touches[0].clientX - rect.left) / rect.width,
            0,
            1
        );
    }
}, { passive: true });

holo1.addEventListener("touchmove", e => {
    if (e.touches.length) {
        const rect = holo1.getBoundingClientRect();
        targetT = clamp(
            (e.touches[0].clientX - rect.left) / rect.width,
            0,
            1
        );
    }
}, { passive: true });

animate();
</script>

<script>/*LOUPE*/
    const cursor = document.getElementById('cursor');

    function updatePosition(x, y) {
      const px = (x / window.innerWidth) * 100;
      const py = (y / window.innerHeight) * 100;

      cursor.style.setProperty('--x', px + '%');
      cursor.style.setProperty('--y', py + '%');
    }

    /* DESKTOP */
    document.addEventListener('mousemove', (e) => {
      updatePosition(e.clientX, e.clientY);
    });

    /* TOUCH */
    document.addEventListener('touchstart', (e) => {
      cursor.style.opacity = 1;
      const t = e.touches[0];
      updatePosition(t.clientX, t.clientY);
    }, { passive: true });

    document.addEventListener('touchmove', (e) => {
      const t = e.touches[0];
      updatePosition(t.clientX, t.clientY);
    }, { passive: true });

    document.addEventListener('touchend', () => {
      cursor.style.opacity = 0;
    });

</script>


<script> /*HOLOGRAMME WIP*/
const holo = document.querySelector(".holo");
const imagesholo = holo.querySelectorAll(".img-s6");
const stepsTwo = imagesholo.length - 1;

let targetT2 = 0;
let currentT2 = 0;
const smoothness2 = 0.1;

imagesholo[0].style.opacity = 1;

function updateImages(t) {
    const scaled = t * stepsTwo;
    const index = Math.floor(scaled);
    const localT = scaled - index;

    imagesholo.forEach(img => img.style.opacity = 0);

    if (imagesholo[index]) {
        imagesholo[index].style.opacity = 1 - localT;
    }
    if (imagesholo[index + 1]) {
        imagesholo[index + 1].style.opacity = localT;
    }
}

function animateHolo() {
    currentT += (targetT - currentT) * smoothness;
    updateImages(currentT);
    requestAnimationFrame(animateHolo);
}

// desktop - changement principal : window au lieu de holo
window.addEventListener("mousemove", e => {
    targetT = clamp(e.clientX / window.innerWidth, 0, 1);
});

// touch - changement principal : window au lieu de holo
window.addEventListener("touchstart", e => {
    if (e.touches.length) targetT = clamp(e.touches[0].clientX / window.innerWidth, 0, 1);
}, { passive: true });

window.addEventListener("touchmove", e => {
    if (e.touches.length) targetT = clamp(e.touches[0].clientX / window.innerWidth, 0, 1);
}, { passive: true });

// deviceorientation (gardé comme dans l'original)
window.addEventListener("deviceorientation", e => {
    const minAngle = -70;
    const maxAngle = 70;
    if (e.gamma != null) targetT = clamp((e.gamma - minAngle) / (maxAngle - minAngle), 0, 1);
});

function clamp(v, min, max) {
    return Math.min(max, Math.max(min, v));
}

animateHolo();
</script>

<script>/*FONT SCROLL – FAKE FONT VARIABLE*/

    const section = document.getElementById("typoSection");
    const text = document.getElementById("text");

    const fonts = [
      { name: "Thin", family: "Amazonia Extra Light Contrast" },
      { name: "Light", family: "Amazonia Light Contrast" },
      { name: "Regular", family: "Amazonia Regular Contrast" },
      { name: "Medium", family: "Amazonia Medium Contrast" },
      { name: "Bold", family: "Amazonia Semi Bold Contrast" },
      { name: "Black", family: "Amazonia Bold Contrast" },
      { name: "Bold", family: "Amazonia Black Contrast" },
      { name: "Black", family: "Amazonia Bold Contrast" },
      { name: "Bold", family: "Amazonia Semi Bold Contrast" },
      { name: "Medium", family: "Amazonia Medium Contrast" },
      { name: "Regular", family: "Amazonia Regular Contrast" },
      { name: "Light", family: "Amazonia Light Contrast" },
      { name: "Thin", family: "Amazonia Extra Light Contrast" },
    ];

    let currentIndex = -1;

    window.addEventListener("scroll", () => {
      const rect = section.getBoundingClientRect();
      const maxScroll = rect.height - window.innerHeight;

      if (rect.top <= 0 && Math.abs(rect.top) <= maxScroll) {
        const progress = Math.abs(rect.top) / maxScroll;
        const index = Math.round(progress * (fonts.length - 1));

        if (index !== currentIndex) {
          currentIndex = index;
          text.style.fontFamily = fonts[index].family;
          if (hud) hud.textContent = `Amazonia ${fonts[index].name}`;
        }
      }
    });
</script>

<script> /*SKETCH P5*/
let p5Section;

function setup() {
  p5Section = document.querySelector(".etape-7");
  if (!p5Section) return;
  let myCanvas = createCanvas(p5Section.offsetWidth, p5Section.offsetHeight);
  myCanvas.parent(p5Section);
  noFill();
  stroke(0);
  strokeWeight(1);
  frameRate(30);
  pixelDensity(1);
}

function draw() {
  background(0);
  line(0, 0.5, width, 0.5);
  line(0, mouseY, width, mouseY);
  line(mouseX, 0, mouseX, height);
  stroke(255, 119, 0);
  stroke(66, 225, 156);
}

function windowResized() {
    if (p5Section) {
        resizeCanvas(p5Section.offsetWidth, p5Section.offsetHeight)
    }
    
    if (mouseX >= 0 && mouseX <= width && mouseY >= 0 && mouseY <= height) {
  line(0, mouseY, width, mouseY);
  line(mouseX, 0, mouseX, height);
    }
}
</script>

<script>/* SON GUNSHOT */
  // On récupère les éléments
  const paragraphe = document.getElementById("monParagraphe");
  const son = document.getElementById("monSon");
  const gunsound = document.getElementById("gunSound");

  // On déclenche le son au clic
  paragraphe.addEventListener("click", () => {
    gunsound.currentTime = 0;
    son.currentTime = 0; // pour pouvoir rejouer le son rapidement
    gunSound.play();
    son.play();
  });
</script>

<script>/*IMAGE AVEC FONDU*/
  document.addEventListener("DOMContentLoaded", () => {
    const section = document.querySelector(".etape-10");
    if (!section) return;
const images = document.querySelectorAll('.image');

window.addEventListener('scroll', () => {
  const sectionTop = section.offsetTop;
  const sectionHeight = section.offsetHeight;
  const viewportMiddle = window.scrollY + window.innerHeight / 2;

  const progress = (viewportMiddle - sectionTop) / sectionHeight;
  const index = Math.floor(progress * images.length);

  images.forEach(img => img.classList.remove('active'));
  if (images[index]) images[index].classList.add('active');
});
});

</script>


</html>
